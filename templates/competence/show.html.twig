{% extends 'base.html.twig' %}

{% block title %}
	Competence
{% endblock %}

{% block banniere_text %}
	DETAILS COMPETENCES - DETAILS COMPETENCES - DETAILS COMPETENCES - DETAILS COMPETENCES - DETAILS COMPETENCES
{% endblock %}

{% block body %}

	<link rel="stylesheet" href={{ asset('assets/css/faq.css') }}>
	<link rel="stylesheet" href={{ asset('assets/css/competence.css') }}>
	<link rel="stylesheet" href={{ asset('assets/css/accueil.css') }}>

	<section>
		<div class="d-flex">
			<section class="w-75 m-5">
				<div>
					<h2>{{competence.nom}}</h2>
					<p class="mt-5 mb-5">{{competence.description}}</p>
				</div>

				{% for message in app.flashes('inscription_erreur') %}
					<div class='alert-success' role="alert">
						{{ message }}
					</div>
				{% endfor %}

				<div class="d-flex justify-content-around row">
					{% for examen in examens %}
						<div class="box-examen col-12 col-md-4">
							<div
								class="details-date">
								{# <p class="date">{{examen.date|date('d/m')}}</p> #}
								<p class="date">{{examen.date|date('d')}}</p>
								<p class="date date-mois">{{examen.date|date('M')}}</p>
							</div>
							<div class="details-examen">
								<i class="fa-solid fa-clock icon"></i>
								<p>À&nbsp;{{examen.date|date('H:i')}}</p>
							</div>
							<div class="details-examen">
								<i class="fa-sharp fa-solid fa-location-dot icon"></i>
								<p>Ville de&nbsp;{{examen.ville}}</p>
							</div>
							<div class="details-examen">
								<i class="fa-solid fa-user"></i>
								<p>{{examen.inscriptions|length}}&nbsp;Inscrits</p>
							</div>
						</div>
						{# et limiter l'affichage des examens à 5 à partir du plus récent #}
					{% endfor %}
				</div>
			</section>

			<section class="w-50 formulaire-comp">
				<form action="/competence/{{competence.id}}" method="POST" class="question-box form-examen">
					<h3>Inscription à un examen</h3>

					<div class="details-date">
						<libelle>Mon choix :</libelle>
						<select
							name="examen_id" class="selection-examen">
							{# verifier if si l'examen est passe ou non au moment ou je m'inscris pour ne pas proposer un examen deja passe #}
							{% for examen in examens %}
								<option value="{{examen.id}}">{{examen.ville}}
									-
									{{examen.date|date('d/m/Y - H:i')}}</option>
							{% endfor %}
						</select>
					</div>
					<button name="submit" type="submit" class="btnMore">Inscription</button>
				</form>
			</section>
		</div>
	</section>

{% endblock %}
